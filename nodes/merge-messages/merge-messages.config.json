{
  "display_name": "Merge Messages",
  "description": "Combine consecutive messages from the same role into single messages.",
  "icon": "merge",
  "category": "messages",
  "inputs": [
    {
      "name": "messages",
      "display_name": "Messages",
      "type": "array",
      "description": "Array of message objects to merge",
      "required": true
    }
  ],
  "outputs": [
    {
      "name": "messages",
      "display_name": "Messages",
      "type": "array",
      "description": "Array with consecutive same-role messages merged"
    },
    {
      "name": "original_count",
      "display_name": "Original Count",
      "type": "number",
      "description": "Number of messages before merging"
    },
    {
      "name": "merged_count",
      "display_name": "Merged Count",
      "type": "number",
      "description": "Number of messages after merging"
    },
    {
      "name": "merges_performed",
      "display_name": "Merges Performed",
      "type": "number",
      "description": "Number of merge operations performed"
    }
  ],
  "settings": [
    {
      "name": "separator",
      "display_name": "Separator",
      "type": "string",
      "description": "How to separate merged content within the same message",
      "default": " ",
      "required": true
    },
    {
      "name": "preserve_structure",
      "display_name": "Preserve Structure",
      "type": "boolean",
      "description": "Whether to preserve multi-modal content structure or flatten to text",
      "default": true,
      "required": true
    }
  ]
}
